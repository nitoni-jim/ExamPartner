
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ExamPartner – Your trusted partner for exam success</title>
  <meta name="theme-color" content="#111827" />
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="styles.css" />

  <style>
    /* tiny inline safety (optional) */
    .muted { opacity: .85; }
  </style>
</head>

<body>
  <header class="top">
    <div class="wrap row space">
      <div class="brand">
        <div class="logo">EP</div>
        <div>
          <div class="title">ExamPartner</div>
          <div class="sub muted">NECO / WAEC / JAMB past questions practice</div>
        </div>
      </div>

      <div class="auth">
        <span id="authState" class="pill">Guest</span>
        <button id="btnLogout" class="btn ghost" type="button" hidden>Logout</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="card hero">
      <div class="row space">
        <div>
          <h1>Practice smarter. Improve faster.</h1>
          <p class="muted">
            Browse questions, view diagrams, and upgrade when you’re ready.
          </p>
        </div>
        <div class="hero-actions">
          <button id="btnPractice" class="btn" type="button">Start Practice</button>
        </div>
      </div>

      <div class="row" style="gap:10px; flex-wrap:wrap; align-items:center; margin-top:10px;">
        <select id="mode">
          <option value="objective">Objective</option>
          <option value="theory">Theory</option>
        </select>

        <div class="pager">
          <button id="btnPagePrev" class="btn ghost" type="button" disabled>Prev</button>
          <button id="btnPageNext" class="btn ghost" type="button" disabled>Next</button>
          <div id="pageInfo" class="pageinfo"></div>
        </div>
      </div>
    </section>

    <details id="filtersPanel" class="filters-panel">
      <summary>Filters</summary>
      <div class="filters-row" style="margin-top:10px;">
        <label for="examFilter">Exam</label>
        <select id="examFilter"></select>

        <label for="yearFilter">Year</label>
        <select id="yearFilter"></select>

        <label for="subjectFilter">Subject</label>
        <select id="subjectFilter"></select>

        <button id="btnClearFilters" class="btn ghost" type="button">Clear Filters</button>
      </div>
    </details>

    <!-- Start Gate (First-run selection) -->
    <div id="startGate" class="startgate" hidden>
      <div class="startgate-title">Choose your exam to start</div>
      <div class="startgate-text">
        Select <b>Exam</b> and <b>Subject</b> in Filters, then questions will load automatically.
      </div>
      <button id="btnOpenFilters" class="btn" type="button">Open Filters</button>
    </div>

    <div id="status" class="status ok">Ready.</div>

    <div id="list" class="list"></div>

    <section id="paywall" class="pay card" hidden>
      <div class="paywall-title">Upgrade required</div>
      <div class="paywall-text">Please upgrade to continue browsing.</div>

      <div class="row" style="gap:10px; flex-wrap:wrap; margin-top:10px;">
        <button id="btnPay" class="btn" type="button">Upgrade</button>
        <button id="btnCheckPaid" class="btn ghost" type="button">I already paid</button>
      </div>
      <div id="payHint" class="muted" style="margin-top:10px;"></div>
    </section>

    <section class="card authbox">
      <h2>Account</h2>
      <div class="row" style="gap:10px; flex-wrap:wrap;">
        <input id="email" placeholder="Email" />
        <input id="password" placeholder="Password" type="password" />
      </div>

      <div class="row" style="gap:10px; flex-wrap:wrap; margin-top:10px;">
        <button id="btnRegister" class="btn ghost" type="button">Create account</button>
        <button id="btnLogin" class="btn" type="button">Login</button>
      </div>

      <div class="adv" style="margin-top:14px;">
        <h3>Account & Settings</h3>

        <div class="grid2">
          <div>
            <label>Server URL (advanced)</label>
            <input id="apiBase" placeholder="https://exampartner-backend.onrender.com" />
            <div class="muted" style="margin-top:6px;">
              If you are using the hosted app, you can ignore this. For local testing, keep your server running.
            </div>
          </div>
          <div class="row" style="gap:10px; align-items:flex-end; flex-wrap:wrap;">
            <button id="btnCheck" class="btn ghost" type="button">Check API</button>
          </div>
        </div>
      </div>
    </section>

    <footer class="muted" style="margin: 18px 0;">
      © <span id="yr"></span> ExamPartner
    </footer>

    <!-- Viewer -->
    <section id="viewer" class="card" hidden>
      <div class="row space">
        <h2 id="qTitle">Question</h2>
        <button id="btnClose" class="btn ghost">Close</button>
      </div>

      <div id="qMeta" class="meta"></div>
      <div id="qText" class="qtext"></div>
      <div id="qDiagrams" class="diagrams"></div>

      <div id="qOptions" class="opts"></div>

      <div class="row" style="gap:10px; margin-top:12px;">
        <button id="btnPrev" class="btn ghost" type="button">Prev Question</button>
        <button id="btnNext" class="btn ghost" type="button">Next Question</button>
      </div>

      <details class="card" style="margin-top:12px;">
        <summary>Answer & Explanation</summary>
        <div id="qAnswer" class="answer"></div>
        <div id="qExplain" class="explain"></div>
      </details>
    </section>
  </main>

  <script src="app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js").catch(() => {});
    }
  </script>
</body>
</html>
